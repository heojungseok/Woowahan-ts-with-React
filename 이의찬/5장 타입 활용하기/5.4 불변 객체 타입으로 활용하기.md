## 4. 불변 객체 타입으로 활용하기

프로젝트에서 상숫값을 관리할 때 객체를 자주 사용한다. theme 객체, 애니메이션 객체, 상숫값 객체 등 여러 곳에서 활용된다.

- **문제 상황**

컴포넌트나 함수에서 객체를 사용할 때 타입을 너무 열린 타입으로 설정하면 문제가 발생한다.

```tsx
const colors = {
  red: "#F45452",
  green: "#0C952A",
  blue: "#1A7CFF",
};

const getColorHex = (key: string) => colors[key];
```

여기서 key 타입을 `string`으로 설정하면 `getColorHex` 함수의 반환 값이 `any`가 된다. colors에 어떤 값이 추가될지 모르기 때문이다.

- **as const와 keyof 활용으로 해결**

`as const` 키워드로 객체를 불변 객체로 선언하고, `keyof` 연산자를 사용하면 실제 colors 객체에 존재하는 키값만 받도록 설정할 수 있다.

이렇게 하면:

- 타입에 맞지 않는 값을 전달할 경우 타입 에러 발생 → 컴파일 단계에서 실수 방지
- 자동 완성 기능으로 객체에 어떤 값이 있는지 쉽게 파악 가능
- **keyof 연산자로 객체 키값을 타입으로 추출하기**

`keyof` 연산자는 객체 타입을 받아 해당 객체의 키값을 string 또는 number의 리터럴 유니온 타입으로 반환한다.

```tsx
interface ColorType {
  red: string;
  green: string;
  blue: string;
}

type ColorKeyType = keyof ColorType; *// 'red' | 'green' | 'blue'*
```

- **typeof 연산자로 값을 타입으로 다루기**

`keyof` 연산자는 객체 타입을 받는다. 따라서 객체의 키값을 타입으로 다루려면 값 객체를 타입으로 변환해야 한다.

타입스크립트의 `typeof` 연산자를 활용하면 변수나 속성의 타입을 추론할 수 있다. 주로 ReturnType 같은 유틸리티 타입이나 keyof 연산자와 함께 사용된다.

```tsx
*const colors = {
  red: "#F45452",
  green: "#0C952A",
  blue: "#1A7CFF",
};
type ColorsType = typeof colors;
/*
{
  red: string;
  green: string;
  blue: string;
}
*/*
```

### **Atom** 컴포넌트에서 **theme style** 객체 활용하기

Button, Header, Input 같은 작은 컴포넌트는 다양한 환경에서 유연하게 사용되어야 한다. 폰트 크기, 색상, 배경색 등의 설정값을 props로 넘겨주도록 설계한다.

- 기존 방식의 문제점

```tsx
interface Props {
  fontSize?: string;
  backgroundColor?: string;
  color?: string;
  onClick: (event: React.MouseEvent<HTMLButtonElement>) => void | Promise<void>;
}
```

`fontSize`, `backgroundColor` 같은 props 타입이 `string`이면 키값이 자동 완성되지 않고, 잘못된 키값을 넣어도 에러가 발생하지 않음

- 개선된 방식

```tsx
const colors = {
  black: "#000000",
  gray: "#222222",
  white: "#FFFFFF",
  mint: "#2AC1BC",
};

const theme = {
  colors: {
    default: colors.gray,
    ...colors
  },
  backgroundColor: {
    default: colors.white,
    gray: colors.gray,
    mint: colors.mint,
    black: colors.black,
  },
  fontSize: {
    default: "16px",
    small: "14px",
    large: "18px",
  },
};

type ColorType = keyof typeof theme.colors;
type BackgroundColorType = keyof typeof theme.backgroundColor;
type FontSizeType = keyof typeof theme.fontSize;

interface Props {
  color?: ColorType;
  backgroundColor?: BackgroundColorType;
  fontSize?: FontSizeType;
  onClick: (event: React.MouseEvent<HTMLButtonElement>) => void | Promise<void>;
}
```

이제 Button 컴포넌트를 사용할 때 자동 완성이 되고, 잘못된 값을 입력하면 타입 오류가 발생한다.

```tsx
const TestComponent = () => {
  return <Button backgroundColor="mint" /> *// 자동 완성: black, gray, mint, white*
}
```

이처럼 theme뿐만 아니라 여러 상숫값을 인자나 props로 받을 때 객체의 키값을 추출한 타입을 활용하면 타입스크립트의 도움을 받아 실수를 방지할 수 있다.