### 런타임과 컴파일타임

프로그래밍 언어는 크게 고수준 언어와 저수준 언어로 나뉜다. 고수준 언어는 사람이 이해하기 쉽고, 저수준 언어는 컴퓨터가 이해하기 쉽다. 자바스크립트는 대표적인 고수준 언어로, 컴파일러나 인터프리터를 통해 기계어로 번역되어 실행된다.

**컴파일타임**은 소스코드가 컴파일 과정을 거쳐 기계어 코드(바이트 코드)로 변환되는 단계다. **런타임**은 컴파일이 완료된 프로그램이 메모리에 적재되어 실행되는 시간을 말한다.

### 자바스크립트 런타임

자바스크립트 런타임은 자바스크립트가 실행되는 환경이다. 대표적으로 크롬, 사파리 같은 브라우저와 Node.js가 있다. 

- 런타임의 주요 구성 요소
    - 자바스크립트 엔진
    - 웹 API
    - 콜백 큐
    - 이벤트 루프
    - 렌더 큐

우리가 자주 보는 에러들이 애플리케이션 실행 중에 발생하는 이유가 바로 런타임에서 자바스크립트 에러가 발생하기 때문이다.

```jsx
let foo;
foo.bar; // TypeError: Cannot read properties of undefined (reading 'bar')

const testArr = null;
if (testArr.length === 0) {
  console.log('zero length');
}
// TypeError: Cannot read properties of null (reading 'length')

function testFn() {
  const foo = "bar";
}
console.log(foo);
// ReferenceError: foo is not defined

```

### 타입스크립트의 컴파일

일반적으로 컴파일은 고수준 언어를 저수준 언어로 변환하는 과정을 의미한다. 하지만 타입스크립트는 `tsc`라는 컴파일러를 통해 자바스크립트 코드로 변환된다.

타입스크립트는 고수준 언어(타입스크립트)가 또 다른 고수준 언어(자바스크립트)로 변환되는 것이기 때문에 트랜스파일(Transpile)이라고 부르기도 한다. 이러한 변환을 수행하는 타입스크립트 컴파일러를 소스 대 소스 컴파일러(source-to-source compiler)라고도 한다.

타입스크립트 컴파일러가 소스코드를 컴파일하여 프로그램이 실행되기까지의 과정

1. 타입스크립트 소스코드를 타입스크립트 AST로 만든다 (tsc)
2. 타입 검사기가 AST를 확인하여 타입을 확인한다 (tsc)
3. 타입스크립트 AST를 자바스크립트 소스로 변환한다 (tsc)
4. 자바스크립트 소스코드를 자바스크립트 AST로 만든다 (런타임)
5. AST가 바이트 코드로 변환된다 (런타임)
6. 런타임에서 바이트 코드가 평가(evaluate)되어 프로그램이 실행된다 (런타임)

**중요한 점**: 타입스크립트 소스코드의 타입은 1~2단계에서만 사용된다. 3단계부터는 타입을 확인하지 않는다. 즉, 개발자가 작성한 타입 정보는 타입 확인에만 쓰이며, 최종 프로그램에는 아무런 영향을 주지 않는다.

타입스크립트는 컴파일타임에 타입을 검사하기 때문에 에러가 발생하면 프로그램이 실행되지 않는다. 이러한 특징 때문에 타입스크립트를 정적 타입 검사기(static type checker)라고 부른다.

```tsx
function add(a: number, b: number) {
  return a + b;
}

add(10, 20);
add(10, "20"); // 에러 발생

```